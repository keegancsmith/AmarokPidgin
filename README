.. -*- mode: rst; compile-command: "rst2html.py README AmarokPidgin.html" -*-

==============
 AmarokPidgin
==============

:Author: Keegan Carruthers-Smith <keegan.csmith@gmail.com>
:Version: 0.2
:Date: May 2008
:URL: http://people.cs.uct.ac.za/~smtkee002/AmarokPidgin.html
:Download: http://www.kde-apps.org/content/show.php?content=48025

.. contents::

Description
===========

A plugin for Amarok that updates your Pidgin status message with what you are
currently listening too.

If you want to update your Gaim status message, look for the AmarokGaim
package.


Dependicies
===========

* Amarok (Tested on Amarok 1.4.9.1)
* Pidgin with D-Bus support (Tested on Pidgin 2.4.1)
* Python with D-Bus support (Tested on Python 2.4.4)
* DCOP client (KDE 3.5.9)
* Optionally depends on chardet for better character
  decoding. [http://chardet.feedparser.org/]
 

Configuration
=============

* Supported variables in **STATUS_MESSAGE** are:

  - $album
  - $artist
  - $genre
  - $title
  - $track
  - $year
  - $nowPlaying
  - $lyricsURL
  - $lyrics

* *$lyrics* variable displays a single line from the lyrics of the song. The
  lyrics must be fetched by Amarok first.
* More configuartion options can be found in *AmarokPidgin.ini*, which can be
  found in *~/.kde/share/apps/amarok/scripts-data/*
* To edit the list of expletives edit *censor_words* in
  *AmarokPidgin.ini*. Words are | seperated


Variable Map
============

All variables that go in the **STATUS_MESSAGE** can now be filtered by a user
supplied function. This is done using the configuration options
**variable_map** and **variable_imports**. **variable_map** is a function
which accepts 2 strings (Variable, Value) and returns a
string. **variable_imports** runs possible imports required for
**variable_map**. Things such as saying displaying Unknown for empty strings
are possible.


Examples
--------

* Quote

.. sourcecode:: python

   variable_map = lambda x,y : y and ("'"+y+"'") or ''

* Unknown String

.. sourcecode:: python

   variable_map = lambda x,y : y or ("Unknown " + x.capitalize())

* iPodify strings

.. sourcecode:: python

   variable_map = lambda x,y : ' '.join(['i' + s.capitalize() for s in y.split()])


License
=======

This software is distributed under the GPLv2. Please read COPYING for more
information.


Changelog
=========

* Version 0.2 (Under developement)

  - Made Media status type "tune". To update:
    + Stop AmarokPidgin in Amarok
    + Delete Media status in Pidgin
    + Start AmarokPidgin in Amarok

* Version 0.1.9 (16/05/2008)

  - New variables: $year, $nowPlaying, $lyricsURL, $lyrics. Based on a patch
    by Hieu Hoang.
  - Variable Map. Based on work by Ryan Davis.
  - Seems to work with Pidgin 2.4.0 now.
  - Media status is of type Avaliable now by default.

* Version 0.1.8 (09/02/2008)

  - Can use chardet library to decode strings.
  - Testing of the new decoding routine thanks to David Partain.
  - Fixed bug with status not returning to Media.
  - Quick hack to prevent crashes on debugging output.

* Version 0.1.7 (02/08/2007)

  - Closes script when Amarok sends SIGTERM. (Thanks to Kiyoshi Murata)
  - Only media status is updated. No changing status anymore on song change.
  - Pausing only changes status if status is on Media. (Thanks to Vasilis
    Vasaitis)

* Version 0.1.6 (27/05/2007)

  - Changed project name to AmarokPidgin
  - Updated codebase to use purple. With thanks to the following
    contributors:

    + Tony Bassette
    + Thomas Bird
    + Luigi Capriotti

* Version 0.1.5 (05/04/2007)

  - Can now change nick instead of status message.
  - Updates to unicode handling.
  - Updates status type if necessary (Thanks to Vasilis Vasaitis)

* Version 0.1.4 (20/11/2006)

  - Fixed a bug with misbehaving kdialogs. (Thanks to Kartik Mohta)
  - Now changes Gaim's status back too default when script closes.
  - Updates status if a song is playing when the script starts.

* Version 0.1.3 (14/11/2006)

  - Now can block expletives in status message.
  - Fixed a bug when reading in the configuration file.

* Version 0.1.2 (02/11/2006)

  - Fixed unicode strings bug. (Thanks too Tim Su)
  - Added basic configuration

* Version 0.1.1 (30/10/2006)

  - Forgot to comment out logging =/

* Version 0.1 (25/10/2006)

  - Initial Release
